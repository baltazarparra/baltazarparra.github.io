{"componentChunkName":"component---src-templates-blog-post-js","path":"/alem-do-ES6/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Além do ECMAScript 2015 aka ES6","resume":"ES7, ES8, ES9, ES10 e ES11. Vamos dar uma olhada nas funcionalidades implementadas após o ES6","date":"18 de Julho de 2021","tags":"tech"},"html":"<h3>ECMAScript 2016 / ES7</h3> <br>\n<p>JavaScript Exponentiation <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">console.log(3 ** 4);\n// expected output: 81\n\nconsole.log(10 ** -2);\n// expected output: 0.01\n\nconsole.log(2 ** 3 ** 2);\n// expected output: 512\n\nconsole.log((2 ** 3) ** 2);\n// expected output: 64</code>\n        </deckgo-highlight-code>\n<p>JavaScript Exponentiation assignment <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">let a = 3;\n\nconsole.log(a **= 2);\n// expected output: 9\n\nconsole.log(a **= 0);\n// expected output: 1\n\nconsole.log(a **= &#39;hello&#39;);\n// expected output: NaN</code>\n        </deckgo-highlight-code>\n<p>JavaScript Array.prototype.includes <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">[1, 2, 3].includes(2);     // true\n[1, 2, 3].includes(4);     // false\n[1, 2, 3].includes(3, 3);  // false\n[1, 2, 3].includes(3, -1); // true\n[1, 2, NaN].includes(NaN); // true</code>\n        </deckgo-highlight-code>\n<p><br><br></p>\n<h3>ECMAScript 2017 / ES8</h3> <br>\n<p>JavaScript String padding <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">const str1 = &#39;5&#39;;\n\nconsole.log(str1.padStart(2, &#39;0&#39;));\n// expected output: &quot;05&quot;\n\nconst fullNumber = &#39;2034399002125581&#39;;\nconst last4Digits = fullNumber.slice(-4);\nconst maskedNumber = last4Digits.padStart(fullNumber.length, &#39;*&#39;);\n\nconsole.log(maskedNumber);\n// expected output: &quot;************5581&quot;</code>\n        </deckgo-highlight-code>\n<p>JavaScript Object.entries <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">var obj = { foo: &#39;bar&#39;, baz: 42 };\nconsole.log(Object.entries(obj)); // [ [&#39;foo&#39;, &#39;bar&#39;], [&#39;baz&#39;, 42] ]\n\n// objeto array-like\nvar obj = { 0: &#39;a&#39;, 1: &#39;b&#39;, 2: &#39;c&#39; };\nconsole.log(Object.entries(obj)); // [ [&#39;0&#39;, &#39;a&#39;], [&#39;1&#39;, &#39;b&#39;], [&#39;2&#39;, &#39;c&#39;] ]\n\n// objeto array-like com ordenação aleatória de chave (key)\nvar an_obj = { 100: &#39;a&#39;, 2: &#39;b&#39;, 7: &#39;c&#39; };\nconsole.log(Object.entries(an_obj)); // [ [&#39;2&#39;, &#39;b&#39;], [&#39;7&#39;, &#39;c&#39;], [&#39;100&#39;, &#39;a&#39;] ]\n\n// getFoo é uma propriedade que não é enumerável\nvar my_obj = Object.create({}, { getFoo: { value: function() { return this.foo; } } });\nmy_obj.foo = &#39;bar&#39;;\nconsole.log(Object.entries(my_obj)); // [ [&#39;foo&#39;, &#39;bar&#39;] ]\n\n// argumento não-objeto será convertido (conversão implícita) para um objeto\nconsole.log(Object.entries(&#39;foo&#39;)); // [ [&#39;0&#39;, &#39;f&#39;], [&#39;1&#39;, &#39;o&#39;], [&#39;2&#39;, &#39;o&#39;] ]\n\n// itera graciosamente através de chave-valor (key-value)\nvar obj = {a: 5, b: 7, c: 9};\nfor (var [key, value] of Object.entries(obj)) {\n    console.log(key + &#39; &#39; + value); // &quot;a 5&quot;, &quot;b 7&quot;, &quot;c 9&quot;\n}\n\n// Ou, usando array extras\nObject.entries(obj).forEach(([key, value]) =&gt; {\n    console.log(key + &#39; &#39; + value); // &quot;a 5&quot;, &quot;b 7&quot;, &quot;c 9&quot;\n});</code>\n        </deckgo-highlight-code>\n<p>JavaScript Object.values <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">var obj = { foo: &quot;bar&quot;, baz: 42 };\nconsole.log(Object.values(obj)); // [&#39;bar&#39;, 42]\n\n// array como objeto\nvar obj = { 0: &#39;a&#39;, 1: &#39;b&#39;, 2: &#39;c&#39; };\nconsole.log(Object.values(obj)); // [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]\n\n// array como objeto com ordenação de chave aleatória\nvar an_obj = { 100: &#39;a&#39;, 2: &#39;b&#39;, 7: &#39;c&#39; };\nconsole.log(Object.values(an_obj)); // [&#39;b&#39;, &#39;c&#39;, &#39;a&#39;]\n\n// getFoo é a propriedade a qual não é enumerável\nvar my_obj = Object.create({}, { getFoo: { value: function() { return this.foo; } } });\nmy_obj.foo = &quot;bar&quot;;\nconsole.log(Object.values(my_obj)); // [&#39;bar&#39;]\n\n// argumento não-objeto será coagido num objeto\nconsole.log(Object.values(&quot;foo&quot;)); // [&#39;f&#39;, &#39;o&#39;, &#39;o&#39;]</code>\n        </deckgo-highlight-code>\n<p>JavaScript async functions <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">function resolverDepoisDe2Segundos(x) {\n  return new Promise(resolve =&gt; {\n    setTimeout(() =&gt; {\n      resolve(x);\n    }, 2000);\n  });\n}\n\nasync function adicionar1(x) {\n  var a = resolverDepoisDe2Segundos(20);\n  var b = resolverDepoisDe2Segundos(30);\n  return x + await a + await b;\n}\n\nadicionar1(10).then(v =&gt; {\n  console.log(v);  // exibe 60 depois de 2 segundos.\n});\n\nasync function adicionar2(x) {\n  var a = await resolverDepoisDe2Segundos(20);\n  var b = await resolverDepoisDe2Segundos(30);\n  return x + a + b;\n}\n\nadicionar2(10).then(v =&gt; {\n  console.log(v);  // exibe 60 depois de 4 segundos.\n});</code>\n        </deckgo-highlight-code>\n<p><br><br></p>\n<h3>ECMAScript 2018 / ES9</h3> <br>\n<p>Asynchronous Iteration <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">function getInterable(...args){\n  let index = 0\n  let iterable = {\n    [Symbol.iterator]() {\n      return this\n    },\n    next() {\n      if(index &lt; args.length){\n        return {value: args[index++], done: false}\n      }else{\n        return {done: true}\n      }\n    }\n  };\n  \n  return iterable\n}\n\n\n/* set a variable */\nvar text = &quot;Some text&quot;;\n\nfor(let val of getInterable(&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;)){\n\ttext += ` and ${val}`;\n}\n\nvar myDivElement = document.getElementById(&#39;aDiv&#39;);\nmyDivElement.innerHTML = &#39;&lt;p&gt;&#39; + text + &#39;&lt;/p&gt;&#39;;</code>\n        </deckgo-highlight-code>\n<p>Promise Finally <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">function checkMail() {\n  return new Promise((resolve, reject) =&gt; {\n    if (Math.random() &gt; 0.5) {\n      resolve(&#39;Mail has arrived&#39;);\n    } else {\n      reject(new Error(&#39;Failed to arrive&#39;));\n    }\n  });\n}\n\ncheckMail()\n  .then((mail) =&gt; {\n    console.log(mail);\n  })\n  .catch((err) =&gt; {\n    console.error(err);\n  })\n  .finally(() =&gt; {\n    console.log(&#39;Experiment completed&#39;);\n  });</code>\n        </deckgo-highlight-code>\n<p><br><br></p>\n <h3>ECMAScript 2019 / ES10</h3> <br>\n<p>Array.flat <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">const arr1 = [0, 1, 2, [3, 4]];\n\nconsole.log(arr1.flat());\n// expected output: [0, 1, 2, 3, 4]\n\nconst arr2 = [0, 1, 2, [[[3, 4]]]];\n\nconsole.log(arr2.flat(2));\n// expected output: [0, 1, 2, [3, 4]]</code>\n        </deckgo-highlight-code>\n<p>Array.flatMap <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">var arr1 = [1, 2, 3, 4];\n\narr1.map(x =&gt; [x * 2]);\n// [[2], [4], [6], [8]]\n\narr1.flatMap(x =&gt; [x * 2]);\n// [2, 4, 6, 8]\n\n//  Só o primeiro nível\narr1.flatMap(x =&gt; [[x * 2]]);\n// [[2], [4], [6], [8]]</code>\n        </deckgo-highlight-code>\n<p>String.trimStart <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">const greeting = &#39;   Hello world!   &#39;;\n\nconsole.log(greeting);\n// expected output: &quot;   Hello world!   &quot;;\n\nconsole.log(greeting.trimStart());\n// expected output: &quot;Hello world!   &quot;;</code>\n        </deckgo-highlight-code>\n<p>String.trimEnd <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">const greeting = &#39;   Hello world!   &#39;;\n\nconsole.log(greeting);\n// expected output: &quot;   Hello world!   &quot;;\n\nconsole.log(greeting.trimEnd());\n// expected output: &quot;   Hello world!&quot;;</code>\n        </deckgo-highlight-code>\n<p>Object.fromEntries <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">const entries = new Map([\n  [&#39;foo&#39;, &#39;bar&#39;],\n  [&#39;baz&#39;, 42]\n]);\n\nconst obj = Object.fromEntries(entries);\n\nconsole.log(obj);\n// expected output: Object { foo: &quot;bar&quot;, baz: 42 }</code>\n        </deckgo-highlight-code>\n<p>Symbol.description <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">console.log(Symbol(&#39;desc&#39;).description);\n// expected output: &quot;desc&quot;\n\nconsole.log(Symbol.iterator.description);\n// expected output: &quot;Symbol.iterator&quot;\n\nconsole.log(Symbol.for(&#39;foo&#39;).description);\n// expected output: &quot;foo&quot;\n\nconsole.log(`${Symbol(&#39;foo&#39;).description}bar`);\n// expected output: &quot;foobar&quot;</code>\n        </deckgo-highlight-code>\n<p><br><br></p>\n<h3>ECMAScript 2020 / ES11</h3> <br>\n<p>GlobalThis <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">var getGlobal = function () {\n  if (typeof self !== &#39;undefined&#39;) { return self; }\n  if (typeof window !== &#39;undefined&#39;) { return window; }\n  if (typeof global !== &#39;undefined&#39;) { return global; }\n  throw new Error(&#39;unable to locate global object&#39;);\n};\n\nvar globals = getGlobal();\n\nif (typeof globals.setTimeout !== &#39;function&#39;) {\n  // sem setTimeout neste ambiente!\n}</code>\n        </deckgo-highlight-code>\n<p>Nullish coalescing operator <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">const foo = null ?? &#39;default string&#39;;\nconsole.log(foo);\n// expected output: &quot;default string&quot;\n\nconst baz = 0 ?? 42;\nconsole.log(baz);\n// expected output: 0</code>\n        </deckgo-highlight-code>\n<p>Optional chaining operator <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">const adventurer = {\n  name: &#39;Alice&#39;,\n  cat: {\n    name: &#39;Dinah&#39;\n  }\n};\n\nconst dogName = adventurer.dog?.name;\nconsole.log(dogName);\n// expected output: undefined\n\nconsole.log(adventurer.someNonExistentMethod?.());\n// expected output: undefined</code>\n        </deckgo-highlight-code>\n<p>Dynamic import <br></p>\n<deckgo-highlight-code language=\"html\"  >\n          <code slot=\"code\">&lt;!DOCTYPE html&gt;\n&lt;meta charset=&quot;utf-8&quot;&gt;\n&lt;title&gt;My library&lt;/title&gt;\n&lt;nav&gt;\n  &lt;a href=&quot;books.html&quot; data-entry-module=&quot;books&quot;&gt;Books&lt;/a&gt;\n  &lt;a href=&quot;movies.html&quot; data-entry-module=&quot;movies&quot;&gt;Movies&lt;/a&gt;\n  &lt;a href=&quot;video-games.html&quot; data-entry-module=&quot;video-games&quot;&gt;Video Games&lt;/a&gt;\n&lt;/nav&gt;\n&lt;main&gt;This is a placeholder for the content that will be loaded on-demand.&lt;/main&gt;\n&lt;script&gt;\n  const main = document.querySelector(&#39;main&#39;);\n  const links = document.querySelectorAll(&#39;nav &gt; a&#39;);\n  for (const link of links) {\n    link.addEventListener(&#39;click&#39;, async (event) =&gt; {\n      event.preventDefault();\n      try {\n        const module = await import(`/${link.dataset.entryModule}.mjs`);\n        // The module exports a function named `loadPageInto`.\n        module.loadPageInto(main);\n      } catch (error) {\n        main.textContent = error.message;\n      }\n    });\n  }\n&lt;/script&gt;</code>\n        </deckgo-highlight-code>\n<p>New export syntax <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">// Existing in JS\nimport * as MyComponent from &#39;./Component.js&#39;\n\n// Added in ES11\nexport * as MyComponent from &#39;./Component.js&#39;</code>\n        </deckgo-highlight-code>\n<p>Promise.allSettled <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">const promise1 = Promise.resolve(3);\nconst promise2 = new Promise((resolve, reject) =&gt; setTimeout(reject, 100, &#39;foo&#39;));\nconst promises = [promise1, promise2];\n\nPromise.allSettled(promises).\n  then((results) =&gt; results.forEach((result) =&gt; console.log(result.status)));\n\n// expected output:\n// &quot;fulfilled&quot;\n// &quot;rejected&quot;</code>\n        </deckgo-highlight-code>\n<p>String.matchAll <br></p>\n<deckgo-highlight-code language=\"javascript\"  >\n          <code slot=\"code\">const regexp = /t(e)(st(\\d?))/g;\nconst str = &#39;test1test2&#39;;\n\nconst array = [...str.matchAll(regexp)];\n\nconsole.log(array[0]);\n// expected output: Array [&quot;test1&quot;, &quot;e&quot;, &quot;st1&quot;, &quot;1&quot;]\n\nconsole.log(array[1]);\n// expected output: Array [&quot;test2&quot;, &quot;e&quot;, &quot;st2&quot;, &quot;2&quot;]</code>\n        </deckgo-highlight-code>"}},"pageContext":{"slug":"/alem-do-ES6/"}}}